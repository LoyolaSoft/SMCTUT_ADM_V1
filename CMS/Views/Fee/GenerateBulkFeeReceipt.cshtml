@model CMS.ViewModel.ViewModel.FeeTransactionViewModel
@{

    Layout = null;
}
@if (Model.lstStudentPersonalInfo != null && Model.liFeeTransaction != null && Model.liFeeStudentAccount != null)
{
    foreach (var dataitem in Model.liFeeTransaction)
    {
        var TransactionList = Model.lstStudentPersonalInfo.Where(s => s.STUDENT_ID == dataitem.STUDENT_ID).ToList();
        <div class="table-responsive">
        <div style="page-break-after:avoid !important;page-break-inside:avoid !important;">
            @if (TransactionList != null && TransactionList.Count > 0)
            {   //this to print receipt header

                <div class="col-md-8 col-lg-offset-2">
                    <div class="pull-left">
                        <h6>
                            <label>Receipt No:</label>@dataitem.RECEIPT_NO
                        </h6>
                    </div>
                    <div class="pull-right">
                        <label>Date:</label>@dataitem.PAYMENT_DATE
                    </div>
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    @if (Model.liCollegeDetails != null)
                    {
                        foreach (var item in Model.liCollegeDetails)
                        {
                            <center>
                                <table>
                                    <tr>
                                        <td><center><strong>@item.COLLEGE_NAME</strong></center></td>
                                    </tr>
                                    <tr>
                                        <td><b> @item.GRADE</b></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">
                                            @item.UNIVERSITY
                                        </td>
                                    </tr>
                                </table>
                            </center>
                        }
                    }
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    <table class="table-condensed" cellpadding="5">
                        <tr>
                            <td><b>Name</b></td>
                            <td><b>@TransactionList.FirstOrDefault().FIRST_NAME</b></td>
                            <td><b>Register No</b></td>
                            <td>@TransactionList.FirstOrDefault().REGISTER_NO</td>
                        </tr>
                        <tr>
                            <td><b>Payment Type</b></td>
                            <td>
                                @dataitem.PAYMENT_MODE
                            </td>
                            <td><b>Class</b></td>
                            <td>@TransactionList.FirstOrDefault().CLASS_CODE</td>
                        </tr>
                    </table>
                </div>
            }

            @{var StudentList = Model.liFeeStudentAccount.Where(s => s.STUDENT_ID == dataitem.STUDENT_ID).ToList();
            }
            @if (StudentList != null && StudentList.Count > 0)
            {
                <div class="col-md-8 col-lg-offset-2">
                    <table class="table table-hover table-bordered">
                        <tr>
                            <th width="50px">#</th>
                            <th>
                                PARTICULARS
                            </th>
                            <th>
                                AMOUNT
                            </th>
                        </tr>
                        @{ int count = 0; }
                        @foreach (var item in StudentList)
                        {
                            <tr>
                                <td width="50px">
                                    @{ count++;}@count
                                </td>
                                <td>@item.HEAD</td>
                                <td class="text-right"><i class="fa fa-inr"></i>@item.DEBIT</td>
                            </tr>
                                        }
                        <tr>
                            <td></td>
                            <td class="text-right">TOTAL</td>
                            <td class="text-right"><i class="fa fa-inr"></i>@dataitem.COLLECTED</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    <div class="col-md-4 col-lg-offset-1">
                        <div class="m-b-10 pull-left">Cashier</div>
                    </div>
                    <div class="col-md-4 col-lg-offset-1">
                        <div class="m-b-10 pull-right">Asst.Manager</div>
                    </div>
                </div>
                <hr />
                <br />
                                        }
        </div>
        <div style="page-break-after:always !important;page-break-inside:avoid !important;page-break-before:avoid !important;">
            @if (TransactionList != null && TransactionList.Count > 0)
            {
                <div class="col-md-8 col-lg-offset-2">
                    <div class="pull-left">
                        <h6>
                            <label>Receipt No:</label>@dataitem.RECEIPT_NO
                        </h6>
                    </div>
                    <div class="pull-right">
                        <label>Date:</label>@dataitem.PAYMENT_DATE
                    </div>
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    @if (Model.liCollegeDetails != null)
                    {
                        foreach (var item in Model.liCollegeDetails)
                        {
                            <center>
                                <table>
                                    <tr>
                                        <td><center><strong>@item.COLLEGE_NAME</strong></center></td>
                                    </tr>
                                    <tr>
                                        <td><b> @item.GRADE</b></td>
                                    </tr>
                                    <tr>
                                        <td class="text-center">
                                            @item.UNIVERSITY
                                        </td>
                                    </tr>
                                </table>
                            </center>
                        }
                    }
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    <table class="table-condensed" cellpadding="5">
                        <tr>
                            <td><b>Name</b></td>
                            <td><b>@TransactionList.FirstOrDefault().FIRST_NAME</b></td>
                            <td><b>Register No</b></td>
                            <td>@TransactionList.FirstOrDefault().REGISTER_NO</td>
                        </tr>
                        <tr>
                            <td><b>Payment Type</b></td>
                            <td>
                                @dataitem.PAYMENT_MODE
                            </td>
                            <td><b>Class</b></td>
                            <td>@TransactionList.FirstOrDefault().CLASS_CODE</td>
                        </tr>
                    </table>
                </div>

            }
            @if (StudentList != null && StudentList.Count > 0)
            {
                <div class="col-md-8 col-lg-offset-2">
                    <table class="table table-hover table-bordered">
                        <tr>
                            <th width="50px">#</th>
                            <th>
                                PARTICULARS
                            </th>
                            <th>
                                AMOUNT
                            </th>
                        </tr>
                        @{ int countrow = 0; }
                        @foreach (var item in StudentList)
                        {
                            <tr>
                                <td width="50px">
                                    @{ countrow++;}@countrow
                                </td>
                                <td>@item.HEAD</td>
                                <td class="text-right"><i class="fa fa-inr"></i>@item.DEBIT</td>
                            </tr>
                                        }
                        <tr>
                            <td></td>
                            <td class="text-right">TOTAL</td>
                            <td class="text-right"><i class="fa fa-inr"></i>@dataitem.COLLECTED</td>
                        </tr>
                    </table>
                </div>
                <div class="col-md-8 col-lg-offset-2">
                    <div class="col-md-4 col-lg-offset-1">
                        <div class="m-b-10 pull-left">Cashier</div>
                    </div>
                    <div class="col-md-4 col-lg-offset-1">
                        <div class="m-b-10 pull-right">Asst.Manager</div>
                    </div>
                </div>
                <hr />

                                        }
        </div>
            </div>
                                            }
                                        }
