@model CMS.ViewModel.Model.StudentInfo
    @using CMS.Utility;
@{
    ViewBag.Title = "AddStudent";
    Layout = "~/Views/Shared/_AdminLayoutPage.cshtml";
}

@section styles{
    <style>
    .disabled
    {
        pointer-events:none;
        opacity:0.4;
    }
    </style>
       <!-- ================== BEGIN PAGE LEVEL CSS STYLE ================== -->

<link href="~/Content/assets/plugins/gritter/css/jquery.gritter.css" rel="stylesheet" />
<link href="~/Content/assets/plugins/bootstrap-sweetalert/sweetalert.css" rel="stylesheet" />
<link href="~/Content/assets/plugins/parsley/src/parsley.css" rel="stylesheet" />
<!-- ================== END PAGE LEVEL CSS STYLE ================== -->
}
<div class="content" id="content">
    <!-- begin breadcrumb -->
    <ol class="breadcrumb pull-right">
        <li><a href="@Url.Action("ADMIN","DashBoard")">Home</a></li>
        <li><a href="@Url.Action("StudentList","Student")">List Student Information</a></li>
        <li class="active">Student Information</li>
    </ol>
    <!-- end breadcrumb -->
    <!-- begin page-header -->
    <h1 class="page-header">Student Information</h1>
    <!-- end page-header -->
    <!-- begin panel -->
    <div class="panel panel-default panel-with-tabs" data-sortable-id="ui-unlimited-tabs-2">
        <div class="panel-heading p-0">
            <div class="panel-heading-btn m-r-10 m-t-10">
                <a href="javascript:;" class="btn btn-xs btn-icon btn-circle btn-inverse" data-click="panel-expand"><i class="fa fa-expand"></i></a>
            </div>
            <!-- begin nav-tabs -->
            <div class="tab-overflow" data-parsley-validate="true" name="form-wizard">
                <ul class="nav nav-tabs">
                    <li class="prev-button"><a href="javascript:;" data-click="prev-tab" aria-controls="first" class="text-inverse"><i class="fa fa-arrow-left"></i></a></li>
                    <li class="active"><a href="#nav-tab1-1" data-toggle="tab" aria-controls="second">Acadamic Details</a></li>
                    <li class="disabled" id="Personal"><a href="#nav-tab1-2" data-toggle="tab">Personal Details</a></li>
                    <li class="disabled" id="Parents"><a href="#nav-tab1-3" data-toggle="tab">Parents Details</a></li>
                    <li class="disabled" id="Address"><a href="#nav-tab1-4" data-toggle="tab">Address Details</a></li>
                    <li class="disabled" id="Activity"><a href="#nav-tab1-5" data-toggle="tab">Activity Details</a></li>
                    <li class="disabled" id="Certificate"><a href="#nav-tab1-6" data-toggle="tab">Certificate Details</a></li>
                    <li class="disabled" id="AccountInfo"><a href="#nav-tab1-7" data-toggle="tab">Account Details</a></li>
                    <li class="disabled" id="Counseling"><a href="#nav-tab1-8" data-toggle="tab">Counseling Details</a></li>
                    @*<li class="disabled" id="Publish"><a href="#nav-tab1-9" data-toggle="tab">Courses Details</a></li>*@
                    <li class="disabled" id="Incident"><a href="#nav-tab1-10" data-toggle="tab">Incident Details</a></li>
                    <li class="disabled" id="Sibling"><a href="#nav-tab1-11" data-toggle="tab">Sibling Details</a></li>
                    <li class="disabled" id="Talents"><a href="#nav-tab1-12" data-toggle="tab">Talents Details</a></li>
                    @*<li class="disabled" id="ClgHistory"><a href="#nav-tab1-13" data-toggle="tab">College History Details</a></li>*@
                    <li class="disabled" id="IssueEtc"><a href="#nav-tab1-14" data-toggle="tab">IssueEtc Details</a></li>
                    @*<li class="disabled" id="Achievement"><a href="#nav-tab1-15" data-toggle="tab">Achievement Details</a></li>*@
                    <li class="disabled" id="Medical"><a href="#nav-tab1-16" data-toggle="tab">Medical Details</a></li>
                    <li class="disabled" id="Qualification"><a href="#nav-tab1-17" data-toggle="tab">Privious Qualification</a></li>

                    <li class="next-button"><a href="javascript:;" data-click="next-tab" class="text-inverse"><i class="fa fa-arrow-right"></i></a></li>
                </ul>
            </div>
        </div>
        <div class="panel-body">
            <div class="tab-content">
                <div class="tab-pane fade active in" id="nav-tab1-1" data-parsley-validate="true">
                    @Html.Action("AddStuAcademicInfo", "Student")
                </div>
                <div class="tab-pane fade" id="nav-tab1-2" data-parsley-validate="true">
                  <div id="dvPersonal"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-3" data-parsley-validate="true">
                    <div id="dvParents"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-4" data-parsley-validate="true">
                    <div id="dvAddress"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-5" data-parsley-validate="true">
                    <div id="dvActivity"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-6" data-parsley-validate="true">
                    <div id="dvCertificate"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-7" data-parsley-validate="true">
                    <div id="dvAccountInfo"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-8" data-parsley-validate="true">
                    <div id="dvCounseling"></div>
                </div>
                @*<div class="tab-pane fade" id="nav-tab1-9">
                    <div id="dvPublish"></div>
                </div>*@
                <div class="tab-pane fade" id="nav-tab1-10" data-parsley-validate="true">
                    <div id="dvIncident"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-11" data-parsley-validate="true">
                    <div id="dvSibling"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-12" data-parsley-validate="true">
                    <div id="dvTalents"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-13" data-parsley-validate="true">
                    <div id="dvClgHistory"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-14" data-parsley-validate="true">
                    <div id="dvIssueEtc"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-15" data-parsley-validate="true">
                    <div id="dvAchievement"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-16" data-parsley-validate="true">
                    <div id="dvMedical"></div>
                </div>
                <div class="tab-pane fade" id="nav-tab1-17" data-parsley-validate="true">
                    <div id="dvQualification"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- end panel -->
</div>
@section scripts{
<script src="~/Content/assets/plugins/flot/jquery.flot.min.js"></script>
<script src="~/Content/assets/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<script src="~/Content/assets/plugins/gritter/js/jquery.gritter.js"></script>
<script src="~/Content/assets/plugins/bootstrap-sweetalert/sweetalert.min.js"></script>
<script src="~/Content/assets/js/ui-modal-notification.demo.min.js"></script>

<script src="~/Content/assets/plugins/parsley/dist/parsley.js"></script>

<script>
    var ID = null;
        $(document).ready(function () {
            handleDatepicker = function () {
                "use strict";
                $("#ADMISSIONDATE,#STUDENTREGISTEREDDATE").datepicker({
                    todayHighlight: true,
                    autoclose: true,
                    endDate: new Date(),
                    format: "dd/mm/yyyy",
                    orientation: "right bottom"
                }
                )
            }
            handleDatepicker();
            var sOption = '<option value="">-- select -- </option>';
            $("#PROGRAM_ID").empty();
            $("#PROGRAM_ID").append(sOption);
            $("#CLASS_ID").empty();
            $("#CLASS_ID").append(sOption);
        });
       
</script>

<script>
    // Bind Course By DepartmentID
    $("#DEPT_ID").on("change", function ()
    {
        var Department = $("#DEPT_ID").val();
   
        $.ajax({
            url:"@Url.Action("FetchProgrammeByID", "Student")",
            method: "POST",
            datatype: "html",
            data: { Department: Department },
            success:function(option)
            {
                var select = $("#PROGRAM_ID");
                select.empty();
                select.append('<option value="">-- select --</option>'+option);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Fetch Class By ShiftID
    $("#SHIFT").on("change", function ()
    {
        var Shift = $("#SHIFT").val();
      
        $.ajax({
            url:"@Url.Action("FetchClassByID", "Student")",
            method: "POST",
            datatype: "html",
            data: { ShiftID: Shift },
            success: function (option)
            {
                var select = $("#CLASS_ID");
                select.empty();
                select.append('<option value="">-select--</option>'+option);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });
    //Add Acadamic Info ...
    $("#btnStudentAcadamic").on("click", function ()
    {
        var isValid = true;
        if ($('#nav-tab1-1').parsley().validate() !== true) isValid = false;
        if (!isValid) {
            //gritter-info,danger,success,warning,default
            myAlert('Something went wrong ! Please check your inputs !', 'gritter-warning', '');
            return false;
        }
        var REGISTER_NO = $("#REGISTER_NO").val();
        var ROLL_NO = $("#ROLL_NO").val();
        var UNIVERSITY_ROLLNO = $("#UNIVERSITY_ROLLNO").val();
        var ADMINSSION_NO = $("#ADMINSSION_NO").val();
        var ADMISSIONDATE = $("#ADMISSIONDATE").val();
        var ADMITTED_CLASS = $("#ADMITTED_CLASS").val();
        var STUDENTREGISTEREDDATE = $("#STUDENTREGISTEREDDATE").val();
        var REMARKS = $("#REMARKS").val();
        var BATCH = $("#BATCH").val();
        var CLASS_ID = $("#CLASS_ID").val();
        var DEPT_ID = $("#DEPT_ID").val();
        var SHIFT = $("#SHIFT").val();
        var PROGRAM_ID = $("#PROGRAM_ID").val();
        var TC_SERIAL_NUMBER = $("#TC_SERIAL_NUMBER").val();
        var STUEMAIL = $("#STU_EMAIL").val();
        var Role = '';
        Role = $("#Role").val();
        var UserType = '';
        UserType = $("#UserType").val();
        var IsLeft = '';
        if ($('#chLeft').attr('checked')) {
            IsLeft = $("#chLeft").val();
        }
        else {
            IsLeft = 0;
        }
        
        var JsonData;
        if (JsonData == null)
        {
            JsonData = '{"IsLeft":"' + IsLeft + '","UserType":"' + UserType + '","Role":"' + Role + '","Stu_Email":"' + STUEMAIL + '","SHIFT":"' + SHIFT + '","RegisterNo":"' + REGISTER_NO + '","RollNo":"' + ROLL_NO + '","URollNo":"' + UNIVERSITY_ROLLNO + '","AdmissionNo":"' + ADMINSSION_NO + '","AdmissionDate":"' + ADMISSIONDATE + '","AdmittedClass":"' + ADMITTED_CLASS + '","sRegisterDate":"' + STUDENTREGISTEREDDATE + '","Remarks":"' + REMARKS + '","Batch":"' + BATCH + '","Class":"' + CLASS_ID + '","Department":"' + DEPT_ID + '","Program":"' + PROGRAM_ID + '","TCSerialNo":"' + TC_SERIAL_NUMBER + '"}';
        }
        $.ajax({
            url:"@Url.Action("InsertAcadamicInfo", "Student")",
            method: "POST",
            datatype: "html",
            data: { str: JsonData },
            success:function(data)
            {
                if (data == "200")
                {
                    myAlert('Record(s) saved successfully ...!', 'gritter-success', '');
                    $("li").removeClass("disabled");
                }
                else if(data=="406")
                    myAlert('Failed to save Records ...!', 'gritter-warning', '');
                else if(data=="201")
                    myAlert('Student Already Exits ...!', 'gritter-warning', '');
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    
</script>

<script>
    // Bind Personal Details ...
    $("#Personal").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuPersonalInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvPersonal").empty();
                $("#dvPersonal").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Address Details ...
    $("#Address").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuAddressInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvAddress").empty();
                $("#dvAddress").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Activity Details ...
    $("#Activity").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuActivityInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvActivity").empty();
                $("#dvActivity").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Parents Details ...
    $("#Parents").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuParentsInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvParents").empty();
                $("#dvParents").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

   // Bind Sibling Details ...
    $("#Sibling").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuSiblingInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvSibling").empty();
                $("#dvSibling").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Certificate Details ...
    $("#Certificate").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuCertificateInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvCertificate").empty();
                $("#dvCertificate").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind AccountInfo Details ...
    $("#AccountInfo").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuAccountInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvAccountInfo").empty();
                $("#dvAccountInfo").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Counseling Details ...
    $("#Counseling").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuCounsellingInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvCounseling").empty();
                $("#dvCounseling").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Incident Details ...
    $("#Incident").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuincidentInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvIncident").empty();
                $("#dvIncident").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    // Bind Incident Details ...
    $("#Talents").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuTalentsInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvTalents").empty();
                $("#dvTalents").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ...!');
            }
        });
    });

    
    // Bind ClgHistory Details ...
    $("#ClgHistory").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuClgHistoryInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvClgHistory").empty();
                $("#dvClgHistory").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ..!');
            }
        });
    });

    // Bind IssueEtc Details ...
    $("#IssueEtc").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuTcIssueInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvIssueEtc").empty();
                $("#dvIssueEtc").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ..!');
            }
        });
    });

    // Bind Achievement Details ...
    $("#Achievement").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuAchivementInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvAchievement").empty();
                $("#dvAchievement").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ..!');
            }
        });
    });

    // Bind Medical Details ...
    $("#Medical").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuMedicalInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvMedical").empty();
                $("#dvMedical").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ..!');
            }
        });
    });

    // Bind PriviousQualificationInfo Details ...
    $("#Qualification").on("click", function ()
    {
        $.ajax({
            url: "@Url.Action("AddStuPriviousQualificationInfo", "Student")",
            method: "POST",
            datatype: "json",
            success:function(data)
            {
                $("#dvQualification").empty();
                $("#dvQualification").append(data);
            },error:function(error)
            {
                alert('Internal Server Error ..!');
            }
        });
    });
</script>
}